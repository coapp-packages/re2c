@import "version.inc";

#product-info  {
	product-name: "re2c";
	version: "${package-version}";
	original-source-location: "http://sourceforge.net/projects/re2c/files/re2c/0.13.5/";
	original-source-website: "http://re2c.org";
	license: "Simplified BSD License";
	packager: "Elizabeth M Smith <auroraeosrose@gmail.com>";
}

build {
    targets:{
        MyLib.dll,
        MyProg.exe
    };
    build-command: @"if defined BuildCfg (
        msbuild /p:Configuration=%BuildCfg% MyProject.sln
        ) else (
        msbuild MyProject.sln
        )";
}

debug {
    set: BuildCfg="Debug";
    uses: build;
}

release {
    set: BuildCfg="Release";
    uses: build;
}

test {
    uses: release;
    build-command: @"call MyTestRoutine.bat";
}

sign {
    uses: release;
    build-command: @"simplesigner.exe --nologo out\**.dll out\**.exe";
}

package {
    uses: sign;
    build-command: @"autopackage.exe COPKG\*.autopkg";
}